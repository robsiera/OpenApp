(function(){function r(n,t){n.loadGoogleApi?Vue.google?t(Vue.google):loadGoogleMapsAPI({key:n.key,client:n.client,libraries:n.libraries,v:n.version},function(n){Vue.google=n;Vue.prototype.$google=n;t(n)}):t(window.google.maps?window.google.maps:window.google)}var i={name:"addressComponent",template:'<div class="el-input"><input ref="autocompvare" type="text" class="el-input__inner" :id="id" :placeholder="placeholder" v-model="autocompleteText" v-on:focus="onFocus()" v-on:blur="onBlur()" v-on:change="onChange" v-on:keypress="onKeyPress" style="width : 500px" ><\/input><\/div>',props:{value:Object,schema:{},prop:String,schema:{},options:{},messages:{},id:{type:String,"default":function(){return"address"+Math.floor(Math.random()*1e3+1)}},placeholder:{type:String,"default":"Start typing"},types:{type:String,"default":"address"},country:{type:[String,Array],"default":null},enableGeolocation:{type:Boolean,"default":!1}},data:function(){return{autocomplete:null,autocompleteText:""}},watch:{autocompleteText:function(n,t){this.$emit("inputChange",{newVal:n,oldVal:t})}},mounted:function(){var n=this;r({libraries:["places"],key:"AIzaSyCe1exctmeJjIb4guyT6newSpyJ7kA3aLc",client:"",version:"3",loadGoogleApi:!0},function(){const t={};n.types&&(t.types=[n.types]);n.country&&(t.componentRestrictions={country:n.country});n.autocomplete=new google.maps.places.Autocomplete(document.getElementById(n.id),t);n.autocomplete.addListener("place_changed",function(){var i=n.autocomplete.getPlace(),f,t,r,u,e;if(!i.geometry){n.$emit("no-results-found",i);return}if(f={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"},t={},i.address_components!==undefined){for(r=0;r<i.address_components.length;r++)u=i.address_components[r].types[0],f[u]&&(e=i.address_components[r][f[u]],t[u]=e);t.latitude=i.geometry.location.lat();t.longitude=i.geometry.location.lng();n.autocompleteText=document.getElementById(n.id).value;n.onChange();n.$emit("propChange","street",t.route+(t.street_number?" "+t.street_number:""));n.$emit("propChange","postalCode",t.postal_code);n.$emit("propChange","city",t.locality);n.$emit("propChange","country",t.country)}})})},methods:{onFocus:function(){this.geolocate();this.$emit("focus")},onBlur:function(){this.$emit("blur")},onChange:function(){this.$emit("change",this.autocompleteText)},onKeyPress:function(n){this.$emit("keypress",n)},clear:function(){this.autocompleteText=""},focus:function(){this.$refs.autocomplete.focus()},blur:function(){this.$refs.autocomplete.blur()},geolocate:function(){this.enableGeolocation&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){var t={lat:n.coords.latitude,lng:n.coords.longitude},i=new google.maps.Circle({center:t,radius:n.coords.accuracy});this.autocomplete.setBounds(i.getBounds())})}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},properties:function(){return this.schema.properties},fields:function(){var t={};for(var n in this.schema.properties)this.columns?this.columns.indexOf(n)>0&&(t[n]=this.schema.properties[n]):n=="id"||this.schema.properties[n].readonly||this.schema.properties[n]["x-rel-app"]||(t[n]=this.schema.properties[n]);return t}}},n,t;Vue.component("oa-address",i);n="__googleMapsApiOnLoadCallback";t=["client","key","language","region","v"];loadGoogleMapsAPI=function(i,r){var f,e,u;if(i=i||{},typeof window=="undefined"&&alert("Can only load the Google Maps API in the browser"),window[n]){oldCallBack=window[n];window[n]=function(){oldCallBack();r&&r(window.google.maps)};return}f=setTimeout(function(){window[n]=function(){};alert("Could not load the Google Maps API")},i.timeout||1e4);window[n]=function(){f!==null&&clearTimeout(f);r&&r(window.google.maps);delete window[n]};e=document.createElement("script");u=["callback="+n];t.forEach(function(n){i[n]&&u.push(n+"="+i[n])});i.libraries&&i.libraries.length&&u.push("libraries="+i.libraries.join(","));e.src="https://maps.googleapis.com/maps/api/js?"+u.join("&");document.body.appendChild(e)}})(),function(){var n={name:"checkboxGroupComponent",template:'<el-checkbox-group v-model="model"><el-checkbox v-for="item in options" :label="item.value" :key="item.value">{{item.label}}<\/el-checkbox><\/el-checkbox-group>',props:{value:{type:Array,"default":function(){return[]}},schema:{},prop:String},data:function(){return{options:[]}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},resource:function(){return this.$route.params.resource}},created:function(){var n=this,t=this.schema["x-enum-action"];if(t){var i=this.schema["x-enum-valuefield"],r=this.schema["x-enum-textfield"]||this.schema["x-enum-valuefield"],u=abp.services.app[n.resource][t];u().done(function(t){n.options=t.items.map(function(n){return{value:n[i],label:n[r]}})}).always(function(){})}else if(this.schema.enum)this.options=this.schema.enum.map(function(n){return{value:n,label:n}});else return[]}};Vue.component("oa-checkbox-group",n)}(),function(){var n={name:"timeComponent",template:'<el-time-select v-model="model" :picker-options="{start: start, step: step, end: end }" ><\/el-time-select>',props:{value:{},schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},start:function(){return this.schema["x-ui-start"]?this.schema["x-ui-start"]:"00:00"},step:function(){return this.schema["x-ui-step"]?this.schema["x-ui-step"]:"00:30"},end:function(){return this.schema["x-ui-end"]?this.schema["x-ui-end"]:"23:30"}}};Vue.component("oa-time",n)}(),function(){var n={name:"datetimeComponent",template:'<el-date-picker v-model="model" type="datetime" format="dd/MM/yyyy HH:mm" ><\/el-date-picker>',props:{value:{},schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}}};Vue.component("oa-datetime",n)}(),function(){var n={name:"daterangeComponent",template:'<div><el-date-picker v-if="!isMobile" v-model="model"  type="daterange" format="dd/MM/yyyy" value-format="yyyy-MM-dd" ><\/el-date-picker>                    <el-date-picker v-if="isMobile" v-model="model1"  type="date" format="dd/MM/yyyy" value-format="yyyy-MM-dd" placeholder="Begin" ><\/el-date-picker>                    <el-date-picker v-if="isMobile" v-model="model2"  type="date" format="dd/MM/yyyy" value-format="yyyy-MM-dd" placeholder="End" ><\/el-date-picker><\/div>',data:function(){return{pickerOptions:{shortcuts:[{text:"Last week",onClick:function(n){const i=new Date,t=new Date;t.setTime(t.getTime()-6048e5);n.$emit("pick",[t,i])}},{text:"Last month",onClick:function(n){const i=new Date,t=new Date;t.setTime(t.getTime()-2592e6);n.$emit("pick",[t,i])}},{text:"Last 3 months",onClick:function(n){const i=new Date,t=new Date;t.setTime(t.getTime()-7776e6);n.$emit("pick",[t,i])}}]}}},props:{value:Array,schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},model1:{get:function(){return this.value&&this.value.length>0?this.value[0]:null},set:function(n){this.model=this.value&&this.getTime(this.value[1])>this.getTime(n)?[n,this.value[1]]:[n,n]}},model2:{get:function(){return this.value&&this.value.length>1?this.value[1]:null},set:function(n){this.model=this.value&&this.getTime(this.value[0])<this.getTime(n)?[this.value[0],n]:[n,n]}},isMobile:function(){return VueForms.isMobile()}},methods:{getTime:function(n){return new Date(n).getTime()}}};Vue.component("oa-daterange",n)}(),function(){var n={name:"inputComponent",template:'<el-input v-model="model"><\/el-input>',props:{value:String,schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}}};Vue.component("oa-input",n)}(),function(){var n={name:"inputNumberComponent",template:'<el-input-number v-model="model" ><\/el-input-number>',props:{value:Number,schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}}};Vue.component("oa-input-number",n)}(),function(){var n={name:"RelationComponent",template:'<div>                     <el-input v-if="isMobile" slot="reference" v-model="searchInput" v-on:blur="search" placeholder="search" clearable >                    <\/el-input>                    <el-select ref="select" v-model="model" :value-key="relationValueField" :filterable="!isMobile" :automatic-dropdown="isMobile" :clearable="!isMobile" v-on:clear="clear" remote :remote-method="remoteMethod" :loading="loading" >                         <el-option v-for="item in options" :key="item.value.id" :label="item.label" :value="item.value"><\/el-option>                     <\/el-select>                     <el-button  v-if="relationResource" :icon="buttonIcon" v-on:click="edit"><\/el-button>                     <slot name="footer"><\/slot>                     <el-dialog v-if="relationResource" ref="customerDialog" title="Client" :visible.sync="dialogVisible" :fullscreen="fullscreen" :before-close="handleClose" :append-to-body="true" @open="openDialog" @close="closeDialog">                         <oa-dialog-form ref="form" :resource="relationResource" v-model="model" v-on:close="close" ><\/oa-dialog-form>                     <\/el-dialog >                 <\/div>',props:{value:{},schema:{},messages:Object,service:{},prop:String,label:String},data:function(){var n=this;return{form:{},loading:!1,dialogVisible:!1,options:[],popoverVisible:!1,searchInput:""}},computed:{sch:function(){return this.schema.oneOf&&this.schema.oneOf[0]?this.schema.oneOf[0]:this.schema},relationResource:function(){return this.sch["x-rel-app"]},relationAction:function(){return this.sch["x-rel-action"]||"get"+this.prop.capitalize()+"s"},relationValueField:function(){return this.sch["x-rel-valuefield"]||"id"},relationTextField:function(){return this.sch["x-rel-textfield"]||"fullName"},id:function(){return this.value?this.value[this.relationValueField]:null},isnew:function(){return!this.value},isMobile:function(){return VueForms.isMobile()},model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},isMobile:function(){return window.matchMedia("only screen and (max-width: 760px)").matches},fullscreen:function(){return this.isMobile},buttonIcon:function(){return this.isnew?"el-icon-plus":"el-icon-edit"}},watch:{value:function(n){var t=this;n&&(this.options=[{label:t.value[t.relationTextField],value:n}])}},methods:{remoteMethod:function(n){var t=this;!n&&t.value?(this.options=[],this.options.push({label:t.value[t.relationTextField],value:this.value})):n&&n!==""&&(!t.value||n!=t.value[t.relationTextField])?(t.loading=!0,t.service[t.relationAction](n).done(function(n){t.options=n.items.map(function(n){return{label:n[t.relationTextField],value:n}});t.loading=!1}).always(function(){})):n==""&&(this.options=[])},clear:function(){this.model=null},edit:function(){this.dialogVisible=!0;this.$refs.form&&this.$refs.form.fetchData()},handleClose:function(n){n()},close:function(n){var t=this;this.dialogVisible=!1;n&&(this.model=n,this.options=[{label:n[t.relationTextField],value:n}])},openDialog:function(){this.fullscreen&&document.body.classList.add("dialog-open")},closeDialog:function(){this.fullscreen&&document.body.classList.remove("dialog-open")},search:function(){this.remoteMethod(this.searchInput);this.$refs.select.focus()}},created:function(){var n=this;this.value&&(this.options=[{label:n.value[n.relationTextField],value:this.value}])}};Vue.component("oa-relation",n)}(),function(){var n={name:"RelationToManyComponent",template:'<div>                     <el-select multiple @input="updateModel" :value="model" :value-key="relationValueField" filterable clearable v-on:clear="clear" remote :remote-method="remoteMethod" :loading="loading" >                         <el-option v-for="item in computedOptions" :key="item.value.id" :label="item.label" :value="item.value"><\/el-option>                     <\/el-select>                     <el-button  v-if="relationResource" :icon="buttonIcon" v-on:click="edit"><\/el-button>                     <slot name="footer"><\/slot>                     <el-dialog v-if="relationResource" ref="customerDialog" title="Client" :visible.sync="dialogVisible" :fullscreen="fullscreen" :before-close="handleClose" :append-to-body="true" @open="openDialog" @close="closeDialog">                         <oa-dialog-form ref="form" :resource="relationResource" v-model="model" v-on:close="close" ><\/oa-dialog-form>                     <\/el-dialog >                 <\/div>',props:{value:{},schema:{},messages:Object,service:{},prop:String,label:String},data:function(){var n=this;return{form:{},loading:!1,dialogVisible:!1,options:null}},computed:{relationResource:function(){return this.schema["x-rel-to-many-app"]},relationAction:function(){return this.schema["x-rel-to-many-action"]||"get"+this.prop.capitalize()+"s"},relationValueField:function(){return this.schema["x-rel-to-many-valuefield"]||"id"},relationTextField:function(){return this.schema["x-rel-to-many-textfield"]||"fullName"},id:function(){return this.value?this.value[this.relationValueField]:null},isnew:function(){return!this.value},model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},isMobile:function(){return window.matchMedia("only screen and (max-width: 760px)").matches},fullscreen:function(){return this.isMobile},buttonIcon:function(){return this.isnew?"el-icon-plus":"el-icon-edit"},computedOptions:function(){var n=[],t;return(this.value&&(n=this.value.map(function(n){return{label:n[this.relationTextField],value:n}}.bind(this))),this.options)?(t=n.concat(this.options),t.filter(function(n,t,i){var r=i.findIndex(function(t){return t.value[this.relationValueField]==n.value[this.relationValueField]}.bind(this));if(r==t)return n}.bind(this))):n.length<=0?null:n}},methods:{remoteMethod:function(n){var t=this;!n&&t.value?this.options=null:n&&n!==""&&(!t.value||n!=t.value[t.relationTextField])?(t.loading=!0,t.service[t.relationAction](n).done(function(n){t.options=n.items.map(function(n){return{label:n[t.relationTextField],value:n}});t.loading=!1}).always(function(){})):n==""&&(this.options=null)},clear:function(){this.model=null},edit:function(){this.dialogVisible=!0;this.$refs.form&&this.$refs.form.fetchData()},handleClose:function(n){n()},close:function(n){var t=this;this.dialogVisible=!1;n&&(this.model=n,this.options=null)},updateModel:function(n){console.log(n);this.model=n},openDialog:function(){this.fullscreen&&document.body.classList.add("dialog-open")},closeDialog:function(){this.fullscreen&&document.body.classList.remove("dialog-open")}}};Vue.component("oa-relation-to-many",n)}(),function(){var n={name:"selectComponent",template:'<el-select v-model="model" placeholder="Select">                     <el-option v-if="!hideNone" :label="noneLabel" :value="noneValue" ><\/el-option>                     <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value" ><\/el-option>                 <\/el-select>',props:{value:{},schema:{},messages:Object,prop:String,service:{}},data:function(){return{options:[],hideNone:!1,noneLabel:"None",noneValue:undefined}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}},created:function(){var r=this,n=this.schema.oneOf&&this.schema.oneOf[0]?this.schema.oneOf[0]:this.schema,t,i;if(n.enum)for(t=0;t<n.enum.length;t++)i=n["x-enumNames"]?n["x-enumNames"][t]:this.prop+"_"+n.enum[t],this.messages&&this.messages[i]&&(i=this.messages[i]),this.options.push({value:n.enum[t],label:i});else if(n["x-enum-action"]){var u=this.schema["x-enum-action"],f=this.schema["x-enum-valuefield"]||"id",e=this.schema["x-enum-textfield"]||"fullName";r.service[u]().done(function(n){r.options=n.map(function(n){return{value:n[f],label:n[e]}})}).always(function(){})}n["x-enum-nonelabel"]&&(this.noneLabel=n["x-enum-nonelabel"],this.messages&&this.messages[this.noneLabel]&&(this.noneLabel=this.messages[this.noneLabel]));n["x-enum-hideNone"]&&(this.hideNone=n["x-enum-hideNone"]);n["default"]&&(this.model=n["default"])}};Vue.component("oa-select",n)}(),function(){var n={name:"switchComponent",template:'<el-switch v-model="model" on-text="" off-text=""><\/el-switch>',props:{value:Boolean,schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}}};Vue.component("oa-switch",n)}(),function(){var n={name:"textareaComponent",template:'<el-input type="textarea" autosize v-model="model"><\/el-input>',props:{value:String,schema:{},prop:String,options:{}},computed:{model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}}};Vue.component("oa-textarea",n)}(),function(){var n={name:"oaField",template:' <el-form-item :label="label" :prop="prop" :label-width="labelWidth">                     <component v-bind:is="currentView" v-model="model" v-bind="$props" @propChange="propChange" ><\/component>                     <\/el-form-item>',props:{value:{},schema:{},prop:String,messages:Object,service:{}},computed:{currentView:function(){var n=VueForms.jsonSchema.getNotNull(this.schema),t=Array.isArray(n.type)?n.type[0]=="null"?n.type[1]:n.type[0]:n.type,r,i;return t=n["x-type"]?n["x-type"]:n["x-rel-action"]?"relation":n["x-rel-to-many-action"]?"relation-to-many":n.enum||n["x-enum-action"]?t=="array"?"checkbox-group":"select":t=="boolean"?"switch":t=="integer"||t=="number"?"input-number":t=="array"&&this.schema.items.format=="date-time"?"daterange":n.format=="date-time"?"datetime":n["x-ui-multiline"]?"textarea":t=="address"?"address":"input",r="oa-"+t,i=Vue.component(r),i||(i=function(n,i){Vue.$loadComponent({name:r,path:abp.appPath+"lib/vueforms/"+t+".js",onLoad:n,onError:i})}),i},model:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},label:function(){if(this.hideLabel)return"";var n=this.schema.title?this.schema.title:this.prop.capitalize();return this.messages&&this.messages[n]?this.messages[n]:this.schema.title?this.schema.title:n},hideLabel:function(){return this.schema["x-ui-hideLabel"]},labelWidth:function(){return this.hideLabel?"0px":"120px"}},methods:{propChange:function(n,t){this.$emit("propChange",n,t)}}};Vue.component("oa-field",n)}(),function(){var n={name:"oaFormItem",template:'<el-form-item :label="label" :prop="prop">                     <slot><\/slot>                 <\/el-form-item>                 <slot name="footer" ><\/slot>',props:{label:{},prop:String,messages:Object},components:{},computed:{},methods:{}};Vue.component("oa-form-item",n)}(),function(){var n={name:"oaDialogForm",template:'<oa-form ref="form" :model="model" :schema="schema" :actions="actions" :messages="messages" :service="service"><\/oa-form>',props:{resource:{},value:{}},data:function(){var n=this;return{messages:abp.localization.values.JobManager,model:{},actions:[{name:"Save",type:"primary",execute:function(){n.$refs.form.validate(function(t){if(t)n.saveData(n.model,function(){n.$message({type:"success",message:"Save completed"});n.$emit("close",n.model)});else return console.log("error submit!!"),!1})}},{name:"Cancel",execute:function(){n.$emit("close")}}]}},computed:{id:function(){return this.value?this.value[this.relationValueField]:null},isnew:function(){return!this.value},relationValueField:function(){return this.schema["x-rel-valuefield"]||"id"},schema:function(){return this.isnew?jref.resolve(abp.schemas.app[this.resource].create.parameters.input):jref.resolve(abp.schemas.app[this.resource].update.parameters.input)},service:function(){return abp.services.app[this.resource]}},methods:{fetchData:function(){var n=this;n.$refs.form.resetForm();this.isnew?n.model={}:abp.services.app[this.resource].get({id:n.id}).done(function(t){n.model=t}).always(function(){})},saveData:function(n,t){var i=this;i.isnew?i.service.create(n).done(function(n){i.model=n;i.$emit("input",n[this.relationValueField]);t&&t()}).always(function(){}):(n.id=i.id,i.service.update(n).done(function(n){i.model=n;i.$emit("input",n.id);t&&t()}).always(function(){}))}},mounted:function(){this.fetchData()}};Vue.component("oa-dialog-form",n)}(),function(){var n={name:"oaForm",template:'<el-form ref="form" :model="model" :rules="rules" label-position="right" label-width="120px" :label-position="labelPosition" >                 <el-tabs v-if="Object.keys(tabs).length > 1" :value="Object.keys(tabs)[0]">                    <el-tab-pane v-for="(gvalue, gkey) in tabs" :key="gkey" :label="label(gkey)" :name="gkey">                         <el-row :gutter="10">                            <el-col v-for="(cvalue, ckey) in gvalue.columns" :key="ckey" :xs="24/Object.keys(gvalue.columns).length" :sm="24/Object.keys(gvalue.columns).length" :md="24/Object.keys(gvalue.columns).length" :lg="24/Object.keys(gvalue.columns).length" :xl="24/Object.keys(gvalue.columns).length">                                <oa-field v-for="(value, key) in cvalue" :key="ckey" :prop="key" :schema="properties[key]" v-model="model[key]" :messages="messages" @propChange="propChange" :service="service" ><\/oa-field>                             <\/el-col>                        <\/el-row>                    <\/el-tab-pane>                 <\/el-tabs>                 <el-row v-else :gutter="10">                    <el-col v-for="(cvalue, ckey) in columns" :key="ckey" :xs="24/Object.keys(columns).length" :sm="24/Object.keys(columns).length" :md="24/Object.keys(columns).length" :lg="24/Object.keys(columns).length" :xl="24/Object.keys(columns).length">                        <oa-field v-for="(value, key) in cvalue" :key="ckey" :prop="key" :schema="properties[key]" v-model="model[key]" :messages="messages" @propChange="propChange" :service="service" ><\/oa-field>                     <\/el-col>                <\/el-row>                <el-form-item>                     <el-button v-for="action in actions" :key="action.name" size="small" :type="action.type" @click="action.execute()">{{action.name}}<\/el-button>                 <\/el-form-item>                 <\/el-form>',props:{model:{},schema:{},options:{},messages:{},actions:{},service:{}},data:function(){return{}},computed:{properties:function(){return this.schema.properties},fields:function(){var t,n;if(this.options)return this.options.fields;t={};for(n in this.schema.properties)n=="id"||this.schema.properties[n].readonly||this.schema.properties[n]["x-rel-app"]||this.schema.properties[n]["x-rel-to-many-app"]||(t[n]=this.schema.properties[n]);return t},rules:function(){var i={},r,u,t,n;for(r in this.schema.properties)t=this.schema.properties[r],n=[],t.required&&t.type!="object"&&(n.push({required:!0,message:"Please input a value"}),i[r]=n);if(this.schema.required)for(u=0;u<this.schema.required.length;u++)t=this.schema.required[u],n=i[t],n||(n=[],i[t]=n),n||(n=[],i[r]=n),n.push({required:!0,message:"Please input a value"});return i},tabs:function(){var n={},r,i,t;for(i in this.fields)t=this.fields[i],r=t["x-ui-group"],r in n==!1&&(n[r]={}),n[r][i]=t;for(i in n)t=n[i],t.columns=this.generateColumns(t);return n},columns:function(){return this.generateColumns(this.fields)},isMobile:function(){return window.matchMedia("only screen and (max-width: 760px)").matches},labelPosition:function(){return this.isMobile?"top":"right"}},methods:{validate:function(n){this.$refs.form.validate(function(t){n&&n(t)})},submitForm:function(){this.$refs.form.validate(function(n){if(n)alert("submit!");else return console.log("error submit!!"),!1})},resetForm:function(){this.$refs.form.resetFields()},label:function(n){return this.messages&&this.messages[n]?this.messages[n]:n},propChange:function(n,t){this.$set(this.model,n,t)},generateColumns:function(n){var t={},r,u,i;for(r in n)u=this.fields[r],i=u["x-ui-column"],i in t==!1&&(t[i]={}),t[i][r]=u;return t}}};Vue.component("oa-form",n)}(),function(){var n={name:"oaFilterform",template:'<el-form ref="form" :model="model" :rules="rules" label-position="right" :label-width="labelwidth" :inline="!isMobile" :label-position="labelPosition">                     <oa-field v-for="(value, key) in fields" :key="key" :prop="key" :schema="properties[key]" v-model="model[key]" :messages="messages" :service="service" @propChange="propChange" ><\/oa-field>                     <el-form-item>                         <el-button v-for="action in actions" :key="action.name" size="small" :icon="action.icon" :type="action.type" @click="action.execute()">{{action.name}}<\/el-button>                     <\/el-form-item>                 <\/el-form>',props:{model:{},schema:{},service:{},options:{},messages:{},actions:{},columns:{}},data:function(){return{}},computed:{properties:function(){return this.schema.properties},fields:function(){var t,n;if(this.options)return this.options.fields;t={};for(n in this.schema.properties)n=="id"||this.schema.properties[n].readonly||this.schema.properties[n]["x-rel-app"]||this.schema.properties[n]["x-rel-to-many-app"]||(t[n]=this.schema.properties[n]);return t},rules:function(){var t={},n,r,i;for(n in this.schema.properties)r=this.schema.properties[n],i=[],t[n]=i;return t},isMobile:function(){return window.matchMedia("only screen and (max-width: 760px)").matches},labelPosition:function(){return this.isMobile?"top":"right"},labelwidth:function(){return this.isMobile?"100px":""}},methods:{validate:function(n){this.$refs.form.validate(function(t){n&&n(t)})},submitForm:function(){this.$refs.form.validate(function(n){if(n)alert("submit!");else return console.log("error submit!!"),!1})},resetForm:function(){this.$refs.form.resetFields()},label:function(n){return this.messages&&this.messages[n]?this.messages[n]:n},propChange:function(n,t){this.$set(this.model,n,t)}}};Vue.component("oa-filter-form",n)}(),function(){var n={name:"oaDialogForm",template:'<oa-form ref="form" :model="model" :schema="schema" :actions="actions" :messages="messages" :service="service"><\/oa-form>',props:{resource:{},value:{}},data:function(){var n=this;return{messages:abp.localization.values.JobManager,model:{},actions:[{name:"Save",type:"primary",execute:function(){n.$refs.form.validate(function(t){if(t)n.saveData(n.model,function(){n.$message({type:"success",message:"Save completed"});n.$emit("close",n.model)});else return console.log("error submit!!"),!1})}},{name:"Cancel",execute:function(){n.$emit("close")}}]}},computed:{id:function(){return this.value?this.value[this.relationValueField]:null},isnew:function(){return!this.value},relationValueField:function(){return this.schema["x-rel-valuefield"]||"id"},schema:function(){return this.isnew?jref.resolve(abp.schemas.app[this.resource].create.parameters.input):jref.resolve(abp.schemas.app[this.resource].update.parameters.input)},service:function(){return abp.services.app[this.resource]}},methods:{fetchData:function(){var n=this;n.$refs.form.resetForm();this.isnew?n.model={}:abp.services.app[this.resource].get({id:n.id}).done(function(t){n.model=t}).always(function(){})},saveData:function(n,t){var i=this;i.isnew?i.service.create(n).done(function(n){i.model=n;i.$emit("input",n[this.relationValueField]);t&&t()}).always(function(){}):(n.id=i.id,i.service.update(n).done(function(n){i.model=n;i.$emit("input",n.id);t&&t()}).always(function(){}))}},mounted:function(){this.fetchData()}};Vue.component("oa-dialog-form",n)}(),function(){var n={name:"oaCrudForm",template:'<oa-form ref="form" :model="model" :schema="schema" :actions="actions" :service="service" :messages="messages"><\/oa-form>',props:{},data:function(){var n=this;return{model:{},actions:[{name:"Save",type:"primary",execute:function(){n.$refs.form.validate(function(t){if(t)n.saveData(n.model,function(){n.$message({type:"success",message:"Save completed"});n.$router.push({name:"grid",params:{resource:n.resource}})});else return console.log("error submit!!"),!1})}},{name:"Cancel",execute:function(){n.$router.push({name:"grid",params:{resource:n.resource}})}}]}},computed:{module:function(){return this.$route.params.module},resource:function(){return this.$route.params.resource},messages:function(){return abp.localization.values[this.module]},id:function(){return this.$route.params.id},isnew:function(){return!this.id},schema:function(){return this.isnew?jref.resolve(abp.schemas.app[this.resource].create.parameters.input):jref.resolve(abp.schemas.app[this.resource].update.parameters.input)},options:function(){return null},service:function(){return abp.services.app[this.resource]}},methods:{fetchData:function(){var n=this;this.isnew||n.service.get({id:n.id}).done(function(t){n.model=t}).always(function(){})},saveData:function(n,t){var i=this;i.isnew?i.service.create(n).done(function(){t&&t()}).always(function(){}):(n.id=i.id,i.service.update(n).done(function(){t&&t()}).always(function(){}))}},created:function(){this.fetchData()},watch:{$route:function(){this.fetchData()}}};Vue.component("oa-crud-form",n)}(),function(){var n={name:"oa-grid",template:'<div>                     <el-table v-if="!isMobile" :data="model" @row-click="rowClick" style="width: 100%" :row-style="{cursor: \'pointer\'}"  >                         <el-table-column v-for="(value, key) in columns" :key="key" :prop="key" :label="label(key)" :formatter="formatter" class-name="crudcell" ><\/el-table-column>                         <el-table-column align="right" min-width="120px">                         <template slot-scope="scope"><el-button v-for="action in actions" :key="action.name" :icon="action.icon" size="small" v-show="actionVisible(action, scope.row, scope.$index)" @click="action.execute(scope.row, scope.$index)"><\/el-button><\/template>                         <\/el-table-column>                     <\/el-table>                     <el-card v-else style="margin-bottom:10px;" v-for="row in model" :key="row.id" >                         <el-row :gutter="10" v-for="(value, key) in columns" :key="key" >                             <el-col :span="12">{{label(key)}}<\/el-col>                             <el-col :span="12">{{format(key, row[key])}}<\/el-col>                         <\/el-row>                         <div style="padding-top:10px;">                         <el-button v-for="action in actions" :key="action.name" :icon="action.icon" size="small" v-show="actionVisible(action, row)" @click="action.execute(row)"><\/el-button>                         <\/div>                     <\/el-card>                 <\/div>',props:{model:{},schema:{},messages:{},actions:{},defaultAction:{}},computed:{columns:function(){var t={};for(var n in this.schema.properties)n!="id"&&this.schema.properties[n].type!="array"&&(!this.schema.properties[n].hasOwnProperty("x-ui-grid")||this.schema.properties[n]["x-ui-grid"])&&(t[n]=this.schema.properties[n]);return t},isMobile:function(){return VueForms.isMobile()}},methods:{label:function(n){var t=this.schema.properties[n].title?this.schema.properties[n].title:n.capitalize();return this.messages&&this.messages[t]?this.messages[t]:t},formatter:function(n,t,i){return this.format(t.property,i)},format:function(n,t){var i=VueForms.jsonSchema.getNotNull(this.schema.properties[n]),r;return i.type=="boolean"?t?this.messages.Yes:this.messages.No:i.format=="date-time"?t?moment(t).locale("fr").format("lll"):"":i.enum?(r=i.enum.indexOf(t),this.messages[i["x-enumNames"][r]]?this.messages[i["x-enumNames"][r]]:i["x-enumNames"][r]):t},rowClick:function(n,t,i){i.label&&this.defaultAction.execute(n,t,i)},actionVisible:function(n,t,i){return n.visible?n.visible(t,i):!0}}};Vue.component("oa-grid",n)}(),function(){var n={name:"oaCrudGrid",template:'<div>                     <el-row :gutter="10" >                         <el-col :xs="24" :sm="2" :md="2" :lg="2" :xl="2" style="padding-bottom: 20px;">                             <el-button v-for="action in actions" :key="action.name" :icon="action.icon" size="small" :type="action.type" @click="action.execute()">{{action.name}}<\/el-button>                         <\/el-col>                         <el-col :xs="24" :sm="22" :md="22" :lg="22" :xl="22" >                             <oa-filter-form v-if="hasFilter" ref="filterform" :model="filterModel" :schema="filterSchema" :service="service" :actions="filterActions" :messages="messages"><\/oa-filter-form>                         <\/el-col>                     <\/el-row>                     <oa-grid :model="model" :schema="schema" :messages="messages" :options="options" :actions="gridActions" :default-action="gridActions[0]"><\/oa-grid><br />                     <div style="float:right;margin-bottom:10px;"><el-pagination @current-change="currentPageChange" :current-page.sync="currentPage" :page-size="pageSize"  layout="total, prev, pager, next" :total="totalCount"><\/el-pagination><\/div>                 <\/div>',data:function(){return{model:[],filterModel:{},totalCount:0,currentPage:1,pageSize:10}},computed:{module:function(){return this.$route.params.module},resource:function(){return this.$route.params.resource},service:function(){return abp.services.app[this.resource]},schema:function(){return jref.resolve(abp.schemas.app[this.resource].get.returnValue)},messages:function(){return abp.localization.values[this.module]},gridActions:function(){var n=this;return[{name:n.translate("Edit"),icon:"el-icon-edit",execute:function(t){n.$router.push({name:"edit",params:{resource:n.resource,id:t.id}})}},{name:n.translate("Delete"),icon:"el-icon-delete",execute:function(t){n.$confirm("Confirm delete ?",n.translate("Delete"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){n.deleteData(t,function(){n.$message({type:"success",message:n.translate("Delete completed")})})}).catch(function(){})},visible:function(n){return typeof n.canDelete!="undefined"?n.canDelete:!0}}]},defaultAction:function(){return this.gridActions[0]},actions:function(){var n=this;return[{icon:"el-icon-plus",type:"primary",execute:function(){n.$router.push({name:"add",params:{resource:n.resource}})}}]},filterSchema:function(){var t={properties:{}},i=abp.schemas.app[this.resource].getAll.parameters.input.properties;for(var n in i)n!="skipCount"&&n!="maxResultCount"&&(t.properties[n]=i[n]);return t},hasFilter:function(){return Object.keys(this.filterSchema.properties).length>0},filterActions:function(){var n=this;return[{icon:"el-icon-search",type:"primary",execute:function(){n.fetchData()}},{icon:"el-icon-close",execute:function(){n.$refs.filterform.resetForm();n.fetchData()}}]},options:function(){return null},totalPages:function(){return Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},methods:{currentPageChange:function(){this.fetchData()},fetchData:function(n){var t=this;t.filterModel.skipCount=(this.currentPage-1)*this.pageSize;t.filterModel.maxResultCount=this.pageSize;t.service.getAll(t.filterModel).done(function(i){t.model=i.items;t.totalCount=i.totalCount;n&&n()}).always(function(){})},deleteData:function(n,t){var i=this;i.service.delete({id:n.id}).done(function(){i.fetchData(t)}).always(function(){})},translate:function(n){return this.messages&&this.messages[n]?this.messages[n]:n}},created:function(){this.fetchData()},watch:{$route:function(){this.fetchData()}}};Vue.component("oa-crud-grid",n)}();VueForms={},function(){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Array.prototype.groupBy=function(n){var t={};return this.forEach(function(i){var r=n(i);r in t==!1&&(t[r]=[]);t[r].push(i)}),Object.keys(t).map(function(n){return{key:n,values:t[n]}})};jref=require("json-ref-lite");var n=jref.resolve;jref.resolve=function(t){var i=JSON.parse(JSON.stringify(t));return n(i)};Vue.$loadComponent=function(n){var t=document.createElement("script");n.onLoad=n.onLoad||function(){};n.onError=n.onError||function(){};t.src=n.path;t.async=!0;t.onload=function(){var t=Vue.component(n.name);if(t)n.onLoad(t);else n.onError()};t.onerror=n.onError;document.body.appendChild(t)};VueForms.jsonSchema={};VueForms.jsonSchema.getNotNull=function(n){if(n.oneOf){var t=n.oneOf.filter(function(n){n.type!="null"});return t.length>0?t[0]:n}return n};VueForms.isMobile=function(){return window.matchMedia("only screen and (max-width: 760px)").matches}}();